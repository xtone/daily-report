# Async adapter only works within the same process, so for manually triggering cable updates from a console,
# and seeing results in the browser, you must do so from the web console (running inside the dev process),
# not a terminal started via bin/rails console! Add "console" to any action or any ERB template view
# to make the web console appear.
# 開発環境でもSolid Cableを使用（Solid Queueとの連携に必要）
# asyncアダプターは同一プロセス内でしか動作しないため、
# 別プロセスで動くSolid Queueからのブロードキャストが届かない
development:
  adapter: solid_cable
  connects_to:
    database:
      writing: cable
  polling_interval: 0.1.seconds
  message_retention: 1.day

test:
  adapter: test

# 本番環境ではSolid Cableを使用（Redis不要）
# ステージングと本番でDBを共有する場合はCHANNEL_PREFIXで分離
production:
  adapter: solid_cable
  connects_to:
    database:
      writing: cable
  polling_interval: 0.1.seconds
  message_retention: 1.day
  channel_prefix: <%= ENV.fetch("CHANNEL_PREFIX", "production") %>
